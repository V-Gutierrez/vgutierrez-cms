<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Victor Gutierrez - Technical Leader & Solutions Architect</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family:
          "Inter",
          -apple-system,
          BlinkMacSystemFont,
          "Segoe UI",
          Roboto,
          sans-serif;
        background: #0a0a0a;
        color: #ffffff;
        line-height: 1.6;
        overflow-x: hidden;
      }

      .container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 0 20px;
      }

      /* Header */
      header {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        background: rgba(10, 10, 10, 0.95);
        backdrop-filter: blur(10px);
        z-index: 1000;
        border-bottom: 1px solid #333;
      }

      nav {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 1rem 0;
      }

      .logo {
        font-size: 1.5rem;
        font-weight: 700;
        color: #ffd700;
      }

      .nav-links {
        display: flex;
        list-style: none;
        gap: 2rem;
      }

      .nav-links a {
        color: #ffffff;
        text-decoration: none;
        font-weight: 500;
        transition: color 0.3s ease;
        cursor: pointer;
      }

      .nav-links a:hover,
      .nav-links a.active {
        color: #ffd700;
      }

      /* Main Content */
      main {
        margin-top: 80px;
        min-height: calc(100vh - 80px);
      }

      .tab-content {
        display: none;
        animation: fadeIn 0.5s ease-in-out;
      }

      .tab-content.active {
        display: block;
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      /* Hero Section */
      .hero {
        min-height: 100vh;
        display: flex;
        align-items: center;
        background: linear-gradient(135deg, #0a0a0a 0%, #1a1a1a 100%);
        position: relative;
        overflow: hidden;
      }

      .hero::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: radial-gradient(
          circle at 30% 40%,
          rgba(255, 215, 0, 0.1) 0%,
          transparent 50%
        );
      }

      .hero-content {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 4rem;
        align-items: center;
        position: relative;
        z-index: 1;
      }

      .hero-text h1 {
        font-size: 3.5rem;
        font-weight: 800;
        margin-bottom: 1rem;
        line-height: 1.1;
      }

      .hero-text h1 span {
        color: #ffd700;
      }

      .hero-text .subtitle {
        font-size: 1.2rem;
        color: #cccccc;
        margin-bottom: 2rem;
      }

      .hero-text .description {
        font-size: 1.1rem;
        color: #999999;
        margin-bottom: 3rem;
        max-width: 500px;
      }

      .cta-button {
        display: inline-block;
        background: #ffd700;
        color: #0a0a0a;
        padding: 1rem 2rem;
        text-decoration: none;
        font-weight: 600;
        border-radius: 8px;
        transition: all 0.3s ease;
        cursor: pointer;
        border: none;
        font-size: 1rem;
      }

      .cta-button:hover {
        background: #ffed4a;
        transform: translateY(-2px);
      }

      .hero-image {
        position: relative;
        display: flex;
        justify-content: center;
        align-items: center;
      }

      .profile-placeholder {
        width: 400px;
        height: 500px;
        background: linear-gradient(135deg, #333 0%, #555 100%);
        border-radius: 20px;
        display: flex;
        align-items: center;
        justify-content: center;
        color: #999;
        font-size: 1.2rem;
        border: 2px solid #ffd700;
      }

      /* Skills Section */
      .skills-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 2rem;
        margin: 4rem 0;
      }

      .skill-category {
        background: #1a1a1a;
        padding: 2rem;
        border-radius: 12px;
        border: 1px solid #333;
      }

      .skill-category h3 {
        color: #ffd700;
        margin-bottom: 1rem;
        font-size: 1.3rem;
      }

      .skills-list {
        list-style: none;
      }

      .skills-list li {
        padding: 0.5rem 0;
        border-bottom: 1px solid #333;
      }

      .skills-list li:last-child {
        border-bottom: none;
      }

      /* Portfolio Section */
      .portfolio-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
        gap: 2rem;
        margin: 2rem 0;
      }

      .project-card {
        background: #1a1a1a;
        border-radius: 12px;
        overflow: hidden;
        border: 1px solid #333;
        transition: transform 0.3s ease;
      }

      .project-card:hover {
        transform: translateY(-5px);
      }

      .project-image {
        height: 200px;
        background: linear-gradient(135deg, #333 0%, #555 100%);
        display: flex;
        align-items: center;
        justify-content: center;
        color: #999;
      }

      .project-content {
        padding: 1.5rem;
      }

      .project-title {
        color: #ffd700;
        font-size: 1.3rem;
        margin-bottom: 0.5rem;
      }

      .project-description {
        color: #cccccc;
        margin-bottom: 1rem;
      }

      .project-tech {
        display: flex;
        flex-wrap: wrap;
        gap: 0.5rem;
      }

      .tech-tag {
        background: #333;
        color: #ffd700;
        padding: 0.25rem 0.75rem;
        border-radius: 20px;
        font-size: 0.9rem;
      }

      /* Blog Section */
      .blog-posts {
        display: grid;
        gap: 2rem;
        margin: 2rem 0;
      }

      .blog-post {
        background: #1a1a1a;
        padding: 2rem;
        border-radius: 12px;
        border: 1px solid #333;
        cursor: pointer;
        transition: transform 0.3s ease;
      }

      .blog-post:hover {
        transform: translateY(-2px);
      }

      .blog-post-title {
        color: #ffd700;
        font-size: 1.5rem;
        margin-bottom: 0.5rem;
      }

      .blog-post-date {
        color: #999;
        font-size: 0.9rem;
        margin-bottom: 1rem;
      }

      .blog-post-excerpt {
        color: #cccccc;
        line-height: 1.6;
      }

      .blog-post-tags {
        display: flex;
        flex-wrap: wrap;
        gap: 0.5rem;
        margin: 1rem 0 0.5rem;
      }

      .tag {
        background: rgba(255, 215, 0, 0.1);
        color: #ffd700;
        padding: 0.25rem 0.5rem;
        border-radius: 12px;
        font-size: 0.8rem;
        border: 1px solid rgba(255, 215, 0, 0.3);
      }

      .reading-time {
        color: #999;
        font-size: 0.9rem;
        margin-top: 0.5rem;
        font-style: italic;
      }

      /* Post Detail */
      .post-detail {
        max-width: 800px;
        margin: 2rem auto;
        padding: 0 20px;
      }

      .post-header {
        text-align: center;
        margin-bottom: 3rem;
      }

      .post-title {
        color: #ffd700;
        font-size: 2.5rem;
        margin-bottom: 1rem;
      }

      .post-meta {
        color: #999;
        font-size: 1rem;
      }

      .post-content {
        color: #cccccc;
        font-size: 1.1rem;
        line-height: 1.8;
      }

      .post-content h2 {
        color: #ffd700;
        margin: 2rem 0 1rem;
      }

      .post-content p {
        margin-bottom: 1.5rem;
      }

      .back-button {
        display: inline-block;
        color: #ffd700;
        text-decoration: none;
        margin-bottom: 2rem;
        font-weight: 500;
      }

      .back-button:hover {
        text-decoration: underline;
      }

      /* Section Headers */
      .section-header {
        text-align: center;
        margin: 4rem 0;
      }

      .section-title {
        font-size: 2.5rem;
        color: #ffd700;
        margin-bottom: 1rem;
      }

      .section-subtitle {
        font-size: 1.2rem;
        color: #999;
        max-width: 600px;
        margin: 0 auto;
      }

      .project-metrics {
        margin-top: 1rem;
        padding-top: 1rem;
        border-top: 1px solid #333;
      }

      .metric {
        color: #cccccc;
        font-size: 0.9rem;
        margin-bottom: 0.25rem;
      }

      .metric strong {
        color: #ffd700;
      }

      .project-status {
        margin-top: 0.5rem;
        padding: 0.25rem 0.75rem;
        border-radius: 12px;
        font-size: 0.8rem;
        text-transform: uppercase;
        font-weight: 600;
        display: inline-block;
      }

      .project-status.completed {
        background: rgba(34, 197, 94, 0.2);
        color: #22c55e;
      }

      .project-status.in-progress {
        background: rgba(251, 191, 36, 0.2);
        color: #fbbf24;
      }

      .project-status.planned {
        background: rgba(107, 114, 128, 0.2);
        color: #9ca3af;
      }

      /* Loading State */
      .loading {
        text-align: center;
        padding: 2rem;
        color: #999;
      }

      /* Responsive Design */
      @media (max-width: 768px) {
        .hero-content {
          grid-template-columns: 1fr;
          text-align: center;
        }

        .hero-text h1 {
          font-size: 2.5rem;
        }

        .nav-links {
          gap: 1rem;
        }

        .profile-placeholder {
          width: 300px;
          height: 400px;
        }
      }
    </style>
  </head>
  <body>
    <header>
      <nav class="container">
        <div class="logo">Victor Gutierrez</div>
        <ul class="nav-links">
          <li><a href="#" data-tab="home" class="active">Home</a></li>
          <li><a href="#" data-tab="portfolio">Portfolio</a></li>
          <li><a href="#" data-tab="blog">Blog</a></li>
        </ul>
      </nav>
    </header>

    <main>
      <!-- Home Tab -->
      <div id="home" class="tab-content active">
        <section class="hero">
          <div class="container">
            <div class="hero-content">
              <div class="hero-text">
                <div class="loading">Loading profile...</div>
              </div>
              <div class="hero-image">
                <div class="profile-placeholder">Loading image...</div>
              </div>
            </div>
          </div>
        </section>

        <section class="container">
          <div class="section-header">
            <h2 class="section-title">Core Competencies</h2>
            <p class="section-subtitle">
              Multi-domain expertise across leadership, architecture, and
              engineering excellence
            </p>
          </div>

          <div class="skills-grid">
            <div class="loading">Loading skills...</div>
          </div>
        </section>
      </div>

      <!-- Portfolio Tab -->
      <div id="portfolio" class="tab-content">
        <section class="container">
          <div class="section-header">
            <h2 class="section-title">Portfolio</h2>
            <p class="section-subtitle">
              Key projects and achievements across enterprise systems and team
              development
            </p>
          </div>

          <div class="portfolio-grid">
            <div class="loading">Loading projects...</div>
          </div>
        </section>
      </div>

      <!-- Blog Tab -->
      <div id="blog" class="tab-content">
        <section class="container">
          <div class="section-header">
            <h2 class="section-title">Blog</h2>
            <p class="section-subtitle">
              Insights on technical leadership, architecture, and engineering
              excellence
            </p>
          </div>

          <div id="blog-posts" class="blog-posts">
            <div class="loading">Loading blog posts...</div>
          </div>
        </section>
      </div>

      <!-- Post Detail -->
      <div id="post-detail" class="tab-content">
        <div class="post-detail">
          <a href="#" class="back-button" onclick="showTab('blog')"
            >&larr; Back to Blog</a
          >
          <div id="post-content">
            <!-- Post content will be loaded here -->
          </div>
        </div>
      </div>
    </main>

    <script>
      // Tab Navigation
      function showTab(tabName) {
        // Hide all tabs
        const tabs = document.querySelectorAll(".tab-content");
        tabs.forEach((tab) => tab.classList.remove("active"));

        // Show selected tab
        document.getElementById(tabName).classList.add("active");

        // Update nav links
        const navLinks = document.querySelectorAll(".nav-links a");
        navLinks.forEach((link) => link.classList.remove("active"));

        const activeLink = document.querySelector(`[data-tab="${tabName}"]`);
        if (activeLink) {
          activeLink.classList.add("active");
        }
      }

      // Add click event listeners to nav links
      document.querySelectorAll(".nav-links a").forEach((link) => {
        link.addEventListener("click", (e) => {
          e.preventDefault();
          const tab = e.target.dataset.tab;
          showTab(tab);
        });
      });

      // Blog functionality
      let blogPosts = [];

      // Sample blog posts (replace with your GitHub API endpoint)
      const samplePosts = [];

      // Initialize blog posts
      function initializeBlog() {
        blogPosts = samplePosts;
        renderBlogPosts();
      }

      // Render blog posts
      function renderBlogPosts() {
        debugLog("renderBlogPosts() called", {
          postsToRender: blogPosts.length,
        });

        const container = document.getElementById("blog-posts");
        if (!container) {
          debugLog("ERROR: blog-posts container not found!");
          return;
        }

        if (blogPosts.length === 0) {
          debugLog("No posts to render");
          container.innerHTML =
            '<div class="loading">No blog posts available.</div>';
          return;
        }

        const postsHtml = blogPosts
          .map((post) => {
            debugLog(`Rendering post: ${post.title}`);
            return `
                    <article class="blog-post" onclick="showPost(${post.id})">
                        <h3 class="blog-post-title">${post.title}</h3>
                        <div class="blog-post-date">${new Date(
                          post.date,
                        ).toLocaleDateString("en-US", {
                          year: "numeric",
                          month: "long",
                          day: "numeric",
                        })}</div>
                        <p class="blog-post-excerpt">${post.excerpt}</p>
                        ${
                          post.tags
                            ? `
                            <div class="blog-post-tags">
                                ${post.tags.map((tag) => `<span class="tag">${tag}</span>`).join("")}
                            </div>
                        `
                            : ""
                        }
                        ${post.readingTime ? `<div class="reading-time">${post.readingTime} min read</div>` : ""}
                    </article>
                `;
          })
          .join("");

        container.innerHTML = postsHtml;
        debugLog("Blog posts HTML updated");
      }

      // Show individual post
      function showPost(postId) {
        const post = blogPosts.find((p) => p.id === postId);
        if (!post) return;

        document.getElementById("post-content").innerHTML = `
                <div class="post-header">
                    <h1 class="post-title">${post.title}</h1>
                    <div class="post-meta">
                        Published on ${new Date(post.date).toLocaleDateString(
                          "en-US",
                          {
                            year: "numeric",
                            month: "long",
                            day: "numeric",
                          },
                        )}
                    </div>
                </div>
                <div class="post-content">
                    ${post.content}
                </div>
            `;

        showTab("post-detail");
      }

      // Load blog posts from GitHub
      async function loadBlogPosts() {
        debugLog("loadBlogPosts() called");
        const blogContainer = document.getElementById("blog-posts");

        try {
          // Show loading state
          if (blogContainer) {
            blogContainer.innerHTML =
              '<div class="loading">🔄 Loading blog posts from GitHub...</div>';
            debugLog("Loading state set in blog container");
          }

          const postsUrl =
            "https://raw.githubusercontent.com/V-Gutierrez/vgutierrez-cms/main/data/posts.json";
          debugLog("Attempting to fetch posts from:", postsUrl);

          const response = await fetch(postsUrl);
          debugLog("Fetch response received", {
            status: response.status,
            statusText: response.statusText,
            ok: response.ok,
            url: response.url,
          });

          if (!response.ok) {
            throw new Error(`HTTP ${response.status}: ${response.statusText}`);
          }

          const posts = await response.json();
          debugLog("Posts JSON parsed successfully", {
            totalPosts: posts.length,
            firstPost: posts[0]?.title || "None",
          });

          blogPosts = posts.filter((post) => post.published);
          debugLog("Filtered published posts", {
            publishedCount: blogPosts.length,
          });

          // Load full content for each post
          for (let i = 0; i < blogPosts.length; i++) {
            const post = blogPosts[i];
            try {
              const contentUrl = `https://raw.githubusercontent.com/V-Gutierrez/vgutierrez-cms/main/data/posts/post-${post.id}.json`;
              debugLog(`Loading content for post ${post.id} from:`, contentUrl);

              const contentResponse = await fetch(contentUrl);
              if (contentResponse.ok) {
                const fullPost = await contentResponse.json();
                post.content = fullPost.content;
                post.readingTime = fullPost.readingTime;
                post.author = fullPost.author;
                debugLog(`Post ${post.id} content loaded successfully`);
              } else {
                debugLog(
                  `Failed to load content for post ${post.id}:`,
                  contentResponse.status,
                );
              }
            } catch (error) {
              debugLog(
                `Error loading content for post ${post.id}:`,
                error.message,
              );
            }
          }

          debugLog("About to call renderBlogPosts()");
          renderBlogPosts();
          debugLog("renderBlogPosts() completed");
        } catch (error) {
          debugLog("Error in loadBlogPosts:", error.message);
          console.error("Error loading blog posts:", error);

          // Show user-friendly error message
          if (blogContainer) {
            blogContainer.innerHTML = `
                        <div class="loading" style="color: #ff6b6b;">
                            <h3>⚠️ Unable to load blog posts</h3>
                            <p><strong>Error:</strong> ${error.message}</p>
                            <p>This usually means:</p>
                            <ul style="text-align: left; margin: 1rem 0;">
                                <li>📁 GitHub repository not created yet</li>
                                <li>🔒 Repository is private (needs to be public)</li>
                                <li>📡 Files not pushed to GitHub yet</li>
                                <li>⏱️ GitHub CDN still updating (wait 1-2 minutes)</li>
                            </ul>
                            <p><strong>Repository URL:</strong><br>
                            <a href="https://github.com/V-Gutierrez/vgutierrez-cms" target="_blank" style="color: #ffd700;">
                                https://github.com/V-Gutierrez/vgutierrez-cms
                            </a></p>
                            <button onclick="loadBlogPosts()" style="margin-top: 1rem; padding: 0.5rem 1rem; background: #ffd700; color: #0a0a0a; border: none; border-radius: 4px; cursor: pointer;">
                                🔄 Retry Loading
                            </button>
                        </div>
                    `;
          }

          // Fall back to sample data
          debugLog("Falling back to sample data...");
          initializeBlog();
        }
      }

      // Load portfolio projects from GitHub
      async function loadProjects() {
        const container = document.querySelector(".portfolio-grid");
        
        try {
          console.log("Fetching projects from GitHub API...");

          if (container) {
            container.innerHTML = '<div class="loading">Loading projects...</div>';
          }

          const response = await fetch(
            "https://raw.githubusercontent.com/V-Gutierrez/vgutierrez-cms/main/data/projects.json",
          );

          if (!response.ok) {
            throw new Error(`HTTP ${response.status}: ${response.statusText}`);
          }

          const projects = await response.json();
          console.log("Projects loaded:", projects.length);

          // Show only featured projects or all projects if no featured ones
          const featuredProjects = projects.filter(project => project.featured);
          const projectsToShow = featuredProjects.length > 0 ? featuredProjects : projects;
          
          console.log("Projects to display:", projectsToShow.length);

          renderProjects(projectsToShow);
        } catch (error) {
          console.error("Error loading projects:", error);
          
          if (container) {
            container.innerHTML = `
              <div class="loading" style="color: #ff6b6b;">
                <h3>⚠️ Unable to load projects</h3>
                <p><strong>Error:</strong> ${error.message}</p>
                <p>Check if the GitHub repository and data files exist</p>
              </div>
            `;
          }
        }
      }

      // Load profile data from GitHub
      async function loadProfile() {
        try {
          console.log("Fetching profile from GitHub API...");
          
          const response = await fetch(
            "https://raw.githubusercontent.com/V-Gutierrez/vgutierrez-cms/main/data/profile.json",
          );
          
          if (!response.ok) {
            throw new Error(`HTTP ${response.status}: ${response.statusText}`);
          }
          
          const profile = await response.json();
          console.log("Profile loaded successfully");
          updateProfileData(profile);
        } catch (error) {
          console.error("Error loading profile:", error);
          showProfileError();
        }
      }

      // Update profile data on the page
      function updateProfileData(profile) {
        if (!profile || !profile.personalInfo) {
          showProfileError();
          return;
        }

        const personalInfo = profile.personalInfo;
        const heroText = document.querySelector(".hero-text");

        if (!heroText) return;

        // Build hero content
        let heroContent = '';
        
        if (personalInfo.subtitle) {
          const parts = personalInfo.subtitle.split("&");
          if (parts.length > 1) {
            heroContent += `<h1>${parts[0].trim()} & <span>${parts[1].trim()}</span></h1>`;
          } else {
            heroContent += `<h1>${personalInfo.subtitle}</h1>`;
          }
        } else {
          heroContent += '<h1>Profile information not available</h1>';
        }

        if (personalInfo.role) {
          heroContent += `<p class="subtitle">${personalInfo.role}</p>`;
        }

        if (personalInfo.description) {
          heroContent += `<p class="description">${personalInfo.description}</p>`;
        }

        heroContent += '<button class="cta-button" onclick="showTab(\'portfolio\')">View My Work</button>';
        
        heroText.innerHTML = heroContent;

        // Update profile image
        const profilePlaceholder = document.querySelector(".profile-placeholder");
        if (profilePlaceholder) {
          if (personalInfo.profileImage) {
            profilePlaceholder.innerHTML = `<img src="${personalInfo.profileImage}" alt="${personalInfo.name || 'Profile'}" style="width: 100%; height: 100%; object-fit: cover; border-radius: 18px;" onerror="this.style.display='none'; this.parentElement.innerHTML='Profile Image';">`;
          } else {
            profilePlaceholder.innerHTML = 'Profile Image';
          }
        }

        // Update skills section
        if (profile.skills) {
          updateSkillsSection(profile.skills);
        } else {
          showSkillsError();
        }
      }

      function showProfileError() {
        const heroText = document.querySelector(".hero-text");
        if (heroText) {
          heroText.innerHTML = `
            <div class="loading" style="color: #ff6b6b;">
              <h3>⚠️ Profile data not available</h3>
              <p>Unable to load profile information from API</p>
            </div>
          `;
        }
      }

      // Update skills section with profile data
      function updateSkillsSection(skills) {
        const skillsGrid = document.querySelector(".skills-grid");
        if (!skillsGrid) return;

        if (!skills || Object.keys(skills).length === 0) {
          skillsGrid.innerHTML = '<div class="loading">No skills data available</div>';
          return;
        }

        const skillCategories = {
          leadershipAndStrategy: "Leadership & Strategy",
          architectureAndSystems: "Architecture & Systems",
          engineeringExcellence: "Engineering Excellence",
          businessAndProduct: "Business & Product",
          technicalStack: "Technical Stack",
          languages: "Languages"
        };

        const hasAnySkills = Object.keys(skills).some(key => skills[key] && skills[key].length > 0);
        
        if (!hasAnySkills) {
          skillsGrid.innerHTML = '<div class="loading">No skills available</div>';
          return;
        }

        skillsGrid.innerHTML = Object.entries(skillCategories)
          .filter(([key]) => skills[key] && skills[key].length > 0)
          .map(([key, title]) => {
            const skillList = skills[key];
            return `
              <div class="skill-category">
                <h3>${title}</h3>
                <ul class="skills-list">
                  ${skillList.map((skill) => `<li>${skill}</li>`).join("")}
                </ul>
              </div>
            `;
          })
          .join("");
      }

      function showSkillsError() {
        const skillsGrid = document.querySelector(".skills-grid");
        if (skillsGrid) {
          skillsGrid.innerHTML = `
            <div class="loading" style="color: #ff6b6b;">
              <h3>⚠️ Skills data not available</h3>
              <p>Unable to load skills information from API</p>
            </div>
          `;
        }
      }

      // Update project rendering to handle GitHub data
      function renderProjects(projects) {
        const container = document.querySelector(".portfolio-grid");
        if (!container) return;

        if (!projects || projects.length === 0) {
          container.innerHTML = '<div class="loading">No projects available</div>';
          return;
        }

        container.innerHTML = projects
          .map(
            (project) => `
                <div class="project-card">
                    <div class="project-image ${project.image ? "" : "no-image"}">
                        ${project.image ? `<img src="${project.image}" alt="${project.title}" onerror="this.style.display='none'; this.parentElement.innerHTML='${project.category || "Project"}';">` : (project.category || "Project")}
                    </div>
                    <div class="project-content">
                        <h3 class="project-title">${project.title || 'Untitled Project'}</h3>
                        <p class="project-description">${project.description || 'No description available'}</p>
                        ${project.technologies && project.technologies.length > 0 ? `
                        <div class="project-tech">
                            ${project.technologies
                              .map(
                                (tech) =>
                                  `<span class="tech-tag">${tech}</span>`,
                              )
                              .join("")}
                        </div>
                        ` : ''}
                        ${
                          project.metrics &&
                          Object.keys(project.metrics).length > 0
                            ? `
                            <div class="project-metrics">
                                ${Object.entries(project.metrics)
                                  .map(
                                    ([key, value]) =>
                                      `<div class="metric"><strong>${formatMetricKey(key)}:</strong> ${value}</div>`,
                                  )
                                  .join("")}
                            </div>
                        `
                            : ""
                        }
                        ${project.status ? `<div class="project-status ${project.status}">${formatStatus(project.status)}</div>` : ''}
                    </div>
                </div>
            `,
          )
          .join("");
      }

      // Format metric keys for display
      function formatMetricKey(key) {
        return key
          .replace(/([A-Z])/g, " $1")
          .replace(/^./, (str) => str.toUpperCase())
          .replace(/_/g, " ");
      }

      // Format status for display
      function formatStatus(status) {
        return status.replace(/-/g, " ").toUpperCase();
      }

      // Debug functions
      function debugLog(message, data = null) {
        console.log('[DEBUG]', message, data || '');
      }

      function toggleDebugPanel() {
        const panel = document.getElementById("debug-panel");
        panel.style.display = panel.style.display === "none" ? "block" : "none";

        if (panel.style.display === "block") {
          debugLog("Debug panel opened");
        }
      }

      async function showDebugInfo() {
        debugLog("Manual debug test started");
        const output = document.getElementById("debug-output");
        output.textContent = "Testing GitHub URLs...\n\n";

        const urls = [
          "https://raw.githubusercontent.com/V-Gutierrez/vgutierrez-cms/main/data/posts.json",
          "https://raw.githubusercontent.com/V-Gutierrez/vgutierrez-cms/main/data/projects.json",
          "https://raw.githubusercontent.com/V-Gutierrez/vgutierrez-cms/main/data/profile.json",
        ];

        for (const url of urls) {
          try {
            debugLog(`Testing URL: ${url}`);
            const response = await fetch(url);
            const status = response.ok ? "✅ OK" : `❌ ${response.status}`;
            output.textContent += `${status} ${url}\n`;

            if (response.ok) {
              const data = await response.json();
              output.textContent += `   Size: ${JSON.stringify(data).length} chars\n`;
              if (Array.isArray(data)) {
                output.textContent += `   Items: ${data.length}\n`;
              }
              debugLog(`URL test success: ${url}`);
            } else {
              debugLog(`URL test failed: ${url} - ${response.status}`);
            }
          } catch (error) {
            output.textContent += `❌ ERROR ${url}\n   ${error.message}\n`;
            debugLog(`URL test error: ${url}`, error.message);
          }
          output.textContent += "\n";
        }

        // Test basic JavaScript functionality
        output.textContent += "\n🔧 JavaScript Tests:\n";
        output.textContent += `✅ DOM Ready: ${document.readyState}\n`;
        output.textContent += `✅ Blog Container: ${document.getElementById("blog-posts") ? "Found" : "Missing"}\n`;
        output.textContent += `✅ Current Posts: ${blogPosts.length}\n`;
        output.textContent += `✅ Sample Posts: ${samplePosts.length}\n`;

        output.textContent += "\nIf you see 404 errors:\n";
        output.textContent +=
          "1. Create repository: https://github.com/V-Gutierrez/vgutierrez-cms\n";
        output.textContent += "2. Make it PUBLIC\n";
        output.textContent += "3. Push your CMS files\n";
        output.textContent += "4. Wait 1-2 minutes for GitHub CDN\n";

        debugLog("Manual debug test completed");
      }

      // Initialize the site when page loads
      document.addEventListener('DOMContentLoaded', function() {
        debugLog('DOM loaded, initializing site...');
        
        // Load content from GitHub or use fallbacks
        loadProfile();
        loadProjects();
        loadBlogPosts();
      });
    </script>
  </body>
</html>

